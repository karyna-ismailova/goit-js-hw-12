{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49130705-dcf2ba3ffc1780735e7549732';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst perPage = 40;\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            },\n        });\n        return { images: response.data.hits, totalHits: response.data.totalHits };\n    } catch (error) {\n        \n        return { images: [], totalHits: 0 };\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loadingMsg = document.querySelector('.loader');\n\nexport function renderGallery(images, append = false) {\n    const gallery = document.querySelector('.gallery');\n     if (!append) {\n        gallery.innerHTML = '';\n    }\n    const markup = images.map(image => `\n        <li class = \"list\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <ul class=\"info\">\n                <li>Likes<br>${image.likes}</li>\n                <li>Views<br>${image.views}</li>\n                <li>Comments<br>${image.comments}</li>\n                <li>Downloads<br>${image.downloads}</li>\n            </ul>\n        </a></li>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup); \n      const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nexport function showErrorMessage() {\n    iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n}\n\nexport function showLoader() {\n    if (loadingMsg) {\n        loadingMsg.style.display = 'block';\n    }\n}\n\nexport function hideLoader() {\n    if (loadingMsg) {\n        loadingMsg.style.display = 'none';\n    }\n}\nexport function showEndMessage() {\n    iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n    });\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showErrorMessage, showLoader, hideLoader } from './js/render-functions.js';\nlet currentPage = 1;\nlet currentQuery = '';\nconst loadMoreBtn = document.querySelector('.load-more');\nloadMoreBtn.style.display = 'none';\n\ndocument.querySelector('.search-form').addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const query = e.target.elements.searchQuery.value.trim();\n    \n    if (!query) {\n        showErrorMessage();\n        return;\n    }\n    if (query !== currentQuery) {\n        currentPage = 1;\n        currentQuery = query;\n        document.querySelector('.gallery').innerHTML = '';\n        loadMoreBtn.style.display = 'none';\n        hideEndMessage();\n    }\n\n    showLoader();\n    \n    try {\n        const { images, totalHits } = await fetchImages(query, currentPage);\n        hideLoader();\n        if (images.length > 0) {\n            renderGallery(images, false);\n            if (totalHits > currentPage * 40) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n                showEndMessage();\n            }\n            scrollPage();\n            \n        } else {\n            showErrorMessage();\n            loadMoreBtn.style.display = 'none';\n        }\n    } catch (error) {\n        hideLoader();\n        \n        showErrorMessage();\n    }\n});\nloadMoreBtn.addEventListener('click', async function () {\n    currentPage += 1;\n    showLoader();\n    try {\n        const { images, totalHits } = await fetchImages(currentQuery, currentPage);\n        hideLoader();\n        if (images.length > 0) {\n            \n            renderGallery(images, true);\n            \n            if (totalHits <= currentPage * 40) {\n                loadMoreBtn.style.display = 'none';\n                showEndMessage();\n            } else {\n                scrollPage();\n            }\n        } else {\n            loadMoreBtn.style.display = 'none';\n            showEndMessage();\n        }\n    } catch (error) {\n        hideLoader();\n\n        showErrorMessage();\n    }\n});\n\nconst scrollPage = () => {\n     const galleryItem = document.querySelector('.gallery .gallery-item');\n    if (galleryItem) {\n        const cardHeight = galleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2, \n            behavior: 'smooth' \n        });\n    }\n\n};\n\n\nfunction showEndMessage() {\n    const endMessage = document.querySelector('.end-message');\n    endMessage.style.display = 'block';\n}\nfunction hideEndMessage() {\n    const endMessage = document.querySelector('.end-message');\n    endMessage.style.display = 'none'; \n}\n\n\n"],"names":["API_KEY","BASE_URL","perPage","fetchImages","query","page","response","axios","SimpleLightbox","loadingMsg","renderGallery","images","append","gallery","markup","image","showErrorMessage","iziToast","showLoader","hideLoader","currentPage","currentQuery","loadMoreBtn","e","hideEndMessage","totalHits","showEndMessage","scrollPage","galleryItem","cardHeight","endMessage"],"mappings":"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"}